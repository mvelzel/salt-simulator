[gd_scene load_steps=18 format=3 uid="uid://bplaidcffy315"]

[ext_resource type="PackedScene" uid="uid://fqw31patorn4" path="res://characters/base_character.tscn" id="1_54qew"]
[ext_resource type="Texture2D" uid="uid://bcw148svktx2o" path="res://icon.svg" id="1_glpr6"]
[ext_resource type="Script" uid="uid://6e0opuom2i3g" path="res://characters/character.gd" id="1_pjt0s"]
[ext_resource type="Script" uid="uid://mrva1r4vc1wk" path="res://characters/weapons.gd" id="3_hkrj1"]
[ext_resource type="PackedScene" uid="uid://cdjhowl3jtn0k" path="res://characters/weapons/gun.tscn" id="6_bnq0n"]
[ext_resource type="PackedScene" uid="uid://cs2x8tlcrekw" path="res://characters/weapons/turret.tscn" id="7_bnq0n"]
[ext_resource type="PackedScene" uid="uid://vfy0ybly0x4o" path="res://weapon_indicator.tscn" id="11_4kffy"]
[ext_resource type="AudioStream" uid="uid://d2nnrnl3cukex" path="res://sounds/grab-pipe.mp3" id="12_bnq0n"]
[ext_resource type="AudioStream" uid="uid://bgkfh8rlqq0kg" path="res://sounds/dwarf-hurt.mp3" id="13_3h56x"]
[ext_resource type="Texture2D" uid="uid://lulewqtv2vg0" path="res://effects/2d_lights_and_shadows_neutral_point_light.webp" id="13_hgjqb"]
[ext_resource type="AudioStream" uid="uid://c78odmy3qrpa3" path="res://sounds/walk-to-dungeon-69897.mp3" id="15_i1355"]
[ext_resource type="PackedScene" uid="uid://0tgabdqxrlqd" path="res://characters/weapons/sword.tscn" id="18_bb4xn"]
[ext_resource type="PackedScene" uid="uid://dbhc6yaxsrm5p" path="res://progress.tscn" id="20_5fe2j"]
[ext_resource type="Texture2D" uid="uid://bf3q6mfujqwwg" path="res://ui/health-bars.png" id="21_md4ow"]

[sub_resource type="AtlasTexture" id="AtlasTexture_mqba4"]
atlas = ExtResource("21_md4ow")
region = Rect2(0, 48, 8, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_md4ow"]
atlas = ExtResource("21_md4ow")
region = Rect2(40, 48, 8, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_bb4xn"]
atlas = ExtResource("21_md4ow")
region = Rect2(8, 48, 8, 16)

[node name="Character" groups=["Player"] instance=ExtResource("1_54qew")]
script = ExtResource("1_pjt0s")
active_weapons = Array[String](["sword"])
turret_amount = 0

[node name="Camera2D" type="Camera2D" parent="." index="4"]
position_smoothing_enabled = true
position_smoothing_speed = 7.5
drag_left_margin = 0.1
drag_top_margin = 0.1
drag_right_margin = 0.1
drag_bottom_margin = 0.1

[node name="Weapons" type="Node2D" parent="." index="5"]
z_index = 5
z_as_relative = false
position = Vector2(112, 112)
script = ExtResource("3_hkrj1")

[node name="Sprite2D" type="Sprite2D" parent="Weapons" index="0"]
visible = false
modulate = Color(100, 100, 100, 1)
z_index = 1
position = Vector2(-3.63588e-06, -3.63588e-06)
scale = Vector2(0.0625001, 0.0625001)
texture = ExtResource("1_glpr6")

[node name="Sword" parent="Weapons" index="1" instance=ExtResource("18_bb4xn")]

[node name="Gun" parent="Weapons" index="2" instance=ExtResource("6_bnq0n")]

[node name="Turret" parent="Weapons" index="3" instance=ExtResource("7_bnq0n")]

[node name="MainLight" type="PointLight2D" parent="." index="6"]
energy = 0.5
shadow_enabled = true
texture = ExtResource("13_hgjqb")
texture_scale = 2.5

[node name="WallIlluminator" type="PointLight2D" parent="." index="7"]
position = Vector2(-40, -56)
energy = 0.2
range_item_cull_mask = 2
shadow_item_cull_mask = 2
texture = ExtResource("13_hgjqb")
texture_scale = 10.0

[node name="FootstepSound" type="AudioStreamPlayer2D" parent="." index="8"]
stream = ExtResource("15_i1355")
volume_db = 1.0

[node name="CanvasLayer" type="CanvasLayer" parent="." index="9"]

[node name="HealthBar" parent="CanvasLayer" index="0" instance=ExtResource("20_5fe2j")]
position = Vector2(384, 976)
scale = Vector2(6, 6)
current_step = 10
start_texture = SubResource("AtlasTexture_mqba4")
end_texture = SubResource("AtlasTexture_md4ow")
progress_texture = SubResource("AtlasTexture_bb4xn")

[node name="WeaponIndicators" type="Node2D" parent="CanvasLayer" index="1"]
position = Vector2(152, 856)

[node name="SwordIndicator" parent="CanvasLayer/WeaponIndicators" index="0" instance=ExtResource("11_4kffy")]

[node name="GunIndicator" parent="CanvasLayer/WeaponIndicators" index="1" instance=ExtResource("11_4kffy")]
position = Vector2(144, 0)
weapon_type = "gun"

[node name="TurretIndicator" parent="CanvasLayer/WeaponIndicators" index="2" instance=ExtResource("11_4kffy")]
position = Vector2(288, 0)
weapon_type = "turret"

[node name="Pipe" type="Node2D" parent="." index="10"]

[node name="GrabPipeSound" type="AudioStreamPlayer2D" parent="Pipe" index="0"]
stream = ExtResource("12_bnq0n")
volume_db = 5.0

[node name="hurtSound" parent="." index="11"]
stream = ExtResource("13_3h56x")

[connection signal="weapon_fired" from="Weapons/Turret" to="." method="_on_turret_weapon_fired"]
